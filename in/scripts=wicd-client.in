#!/bin/bash
BOLD=`tput bold`
BLUE=`tput setaf 4`
NC=`tput sgr0`
# check_firstrun()
if [ ! -d ~/.wicd ]; then
    mkdir ~/.wicd
fi
# Make sure the user knows WHEREAREMYFILES ;-)
if [ -e %DOCDIR%WHEREAREMYFILES ] && [ ! -L ~/.wicd/WHEREAREMYFILES ]; then
    ln -s %DOCDIR%WHEREAREMYFILES ~/.wicd/WHEREAREMYFILES
fi
if [ "$DISPLAY" = "" ] && [ -x "%BIN%wicd-curses" ]; then
    if [ ! -f ~/.wicd/CLIENT_CURSES_WARNING ]; then
        echo "NOTICE: We see that you don't have an X server active on this console."
        echo "We will now be starting ${BOLD}${BLUE}wicd-curses${NC}.  If you desire"
        echo "more information about what is happening here, please read:"
        echo 
        echo "man wicd-client"
        echo "-or-"
        echo "man wicd-curses"
        echo
        echo "We apologize for any inconvenience.  This message will not be displayed again."
        echo "Please press enter to continue..."

        read junk
        cat >>~/.wicd/CLIENT_CURSES_WARNING<<EOF 
This file is what wicd-client looks for so that it doesn't try to tell you that
it is trying to launch the curses client so that it doesn't surprise non-
technical users.

Please keep this file.  If you remove it, then wicd-client will bark at
you if you try to launch wicd-client on a screen that is not running X.

Or, you could just run "touch ~/.wicd/CLIENT_CURSES_WARNING", and the same
objective will be met.

Have a nice day.

~The Wicd Developers
EOF
        #touch ~/.wicd/CLIENT_CURSES_WARNING
    fi
    exec %BIN%wicd-curses
fi

exec python -O %LIB%wicd-client.py $@
